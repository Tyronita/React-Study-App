{"ast":null,"code":"import _regeneratorRuntime from \"/home/gonk/code/CS/spam/evan/React-Study-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/gonk/code/CS/spam/evan/React-Study-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/gonk/code/CS/spam/evan/React-Study-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/gonk/code/CS/spam/evan/React-Study-App/src/pages/Signup.js\";\nimport React, { useState } from \"react\";\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from \"firebase/auth\";\nimport { Navigate, Link } from \"react-router-dom\";\nimport { auth } from \"../firebase-config\";\nimport { Alert } from 'react-bootstrap';\nimport \"bootstrap/dist/css/bootstrap.min.css\"; // Template\n\nexport default function Signup() {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      registerEmail = _useState4[0],\n      setRegisterEmail = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      registerPassword = _useState6[0],\n      setRegisterPassword = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      registerConfirmPassword = _useState8[0],\n      setRegisterConfirmPassword = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      error = _useState10[0],\n      setError = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loading = _useState12[0],\n      setLoading = _useState12[1];\n\n  onAuthStateChanged(auth, function (currentUser) {\n    setUser(currentUser);\n  }); // Form validation\n\n  function handleSubmit(_x) {\n    return _handleSubmit.apply(this, arguments);\n  } // // Create function to login when details submitted\n  // const login = async (e) => {\n  //     e.preventDefault()\n  //     try {\n  //         setError('')\n  //         setLoading(true) // loading while we log on\n  //         const user = await signInWithEmailAndPassword(\n  //             auth,\n  //             registerEmail,\n  //             registerPassword\n  //         );\n  //     } catch (error) {\n  //         console.log(error.message);\n  //         setError('Failed to login')\n  //     }\n  // }\n\n\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n\n              if (!(registerPassword !== registerConfirmPassword)) {\n                _context2.next = 3;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", setError('Passwords do not match'));\n\n            case 3:\n              if (!(registerPassword.length < 6)) {\n                _context2.next = 5;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", setError('Passwords do not match'));\n\n            case 5:\n              _context2.prev = 5;\n              setError('');\n              setLoading(true);\n              _context2.next = 10;\n              return register();\n\n            case 10:\n              _context2.next = 15;\n              break;\n\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](5);\n              setError('Failed to create an account');\n\n            case 15:\n              setLoading(false);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[5, 12]]);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  var register = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _user;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return createUserWithEmailAndPassword(auth, registerEmail, registerPassword);\n\n            case 3:\n              _user = _context.sent;\n              _context.next = 10;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0.message);\n              throw _context.t0;\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 6]]);\n    }));\n\n    return function register() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"w-100 \",\n    style: {\n      maxWidth: '600px',\n      margin: \"30px auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, \"Create Account\"), error && /*#__PURE__*/React.createElement(Alert, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 27\n    }\n  }, error), /*#__PURE__*/React.createElement(\"div\", {\n    classname: \"form-floating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"floatingInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    placeholder: \"name@example.com\",\n    className: \"form-control\",\n    id: \"floatingInput\",\n    onChange: function onChange(event) {\n      setRegisterEmail(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-floating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"floatingPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Password must be at least 6 characters\",\n    className: \"form-control\",\n    id: \"floatingPassword\",\n    onChange: function onChange(event) {\n      setRegisterPassword(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-floating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"floatingConfirmPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, \"Confirm Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Must match password\",\n    className: \"form-control\",\n    id: \"floatingConfirmPassword\",\n    onChange: function onChange(event) {\n      setRegisterConfirmPassword(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"w-100 btn btn-lg btn-primary\",\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, \"Create Account\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100 text-center mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, \"Already have an account? \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/log-in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 42\n    }\n  }, \"Log in\")));\n}","map":{"version":3,"sources":["/home/gonk/code/CS/spam/evan/React-Study-App/src/pages/Signup.js"],"names":["React","useState","createUserWithEmailAndPassword","signInWithEmailAndPassword","onAuthStateChanged","Navigate","Link","auth","Alert","Signup","user","setUser","registerEmail","setRegisterEmail","registerPassword","setRegisterPassword","registerConfirmPassword","setRegisterConfirmPassword","error","setError","loading","setLoading","currentUser","handleSubmit","e","preventDefault","length","register","console","log","message","maxWidth","margin","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from \"firebase/auth\";\r\nimport { Navigate, Link } from \"react-router-dom\";\r\nimport { auth } from \"../firebase-config\";\r\nimport { Alert } from 'react-bootstrap'\r\nimport \"bootstrap/dist/css/bootstrap.min.css\"\r\n\r\n// Template\r\nexport default function Signup (){\r\n\r\n    const [user, setUser] = useState({});\r\n\r\n    const [registerEmail, setRegisterEmail] = useState(\"\");\r\n    const [registerPassword, setRegisterPassword] = useState(\"\");\r\n    const [registerConfirmPassword, setRegisterConfirmPassword] = useState(\"\");\r\n    const [error, setError] = useState('')\r\n    const [loading, setLoading] = useState(false)   \r\n\r\n    onAuthStateChanged(auth, (currentUser) => {\r\n        setUser(currentUser);\r\n    });\r\n\r\n    // Form validation\r\n    async function handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if (registerPassword !== registerConfirmPassword) {\r\n            return setError('Passwords do not match')\r\n        }\r\n\r\n        if (registerPassword.length < 6) {\r\n            return setError('Passwords do not match')\r\n        }\r\n\r\n        try {\r\n\r\n            setError('');\r\n            setLoading(true);\r\n            await register();\r\n\r\n            // try {\r\n            //     await login();\r\n            // } catch {\r\n            //     setError('Failed to login')\r\n            // }\r\n\r\n        } catch {\r\n            setError('Failed to create an account')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    // // Create function to login when details submitted\r\n    // const login = async (e) => {\r\n    //     e.preventDefault()\r\n    //     try {\r\n    //         setError('')\r\n    //         setLoading(true) // loading while we log on\r\n    //         const user = await signInWithEmailAndPassword(\r\n    //             auth,\r\n    //             registerEmail,\r\n    //             registerPassword\r\n    //         );\r\n    //     } catch (error) {\r\n    //         console.log(error.message);\r\n    //         setError('Failed to login')\r\n    //     }\r\n    // }\r\n\r\n    const register = async () => {\r\n        try {\r\n            // Create User\r\n            const user = await createUserWithEmailAndPassword(\r\n                auth,\r\n                registerEmail,\r\n                registerPassword\r\n            );\r\n\r\n        } catch (error) {\r\n            console.log(error.message)\r\n            throw error\r\n        }\r\n    };\r\n\r\n    return (\r\n        <main className=\"h-100\">\r\n            <form onSubmit = {handleSubmit} className = \"w-100 \" style={{ maxWidth: '600px', margin:\"30px auto\"}}>\r\n\r\n                <h2 className='text-center mb-4'>Create Account</h2>\r\n\r\n                {/* Error message if error */}\r\n                {error && <Alert variant=\"danger\">{error}</Alert>}\r\n\r\n                {/* Input email */}\r\n                <div classname=\"form-floating\">\r\n                    <label for=\"floatingInput\">Email address</label>\r\n                    <input\r\n                        type=\"email\"\r\n                        placeholder=\"name@example.com\"\r\n                        className=\"form-control\" id=\"floatingInput\"\r\n                        onChange={(event) => {\r\n                          setRegisterEmail(event.target.value);\r\n                        }}\r\n                    /> \r\n                </div>\r\n\r\n                {/* Input password */}\r\n                <div className=\"form-floating\">\r\n                    <label for=\"floatingPassword\">Password</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        placeholder=\"Password must be at least 6 characters\"\r\n                        className=\"form-control\" id=\"floatingPassword\"\r\n                        onChange={(event) => {\r\n                            setRegisterPassword(event.target.value);\r\n                        }}\r\n                    />\r\n                </div>\r\n\r\n                {/* Input confirm password */}\r\n                <div className=\"form-floating\">\r\n                    <label for=\"floatingConfirmPassword\">Confirm Password</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        placeholder=\"Must match password\"\r\n                        className=\"form-control\" id=\"floatingConfirmPassword\"\r\n                        onChange={(event) => {\r\n                            setRegisterConfirmPassword(event.target.value);\r\n                        }}\r\n                    />\r\n                </div>\r\n                \r\n                {/* Submit form button */}\r\n                <button class=\"w-100 btn btn-lg btn-primary\" disabled = {loading}>\r\n                    Create Account\r\n                </button>\r\n\r\n            </form>\r\n\r\n            <div className = \"w-100 text-center mt-2\">\r\n                Already have an account? <Link to=\"/log-in\">Log in</Link>\r\n            </div>\r\n        </main>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}